# 자바스크립트의 좋은 점들
초보 프로그래머 시절에 필자는 새로운 프로그래밍 언어를 사용할 때 항상 언어의 모든 기능을 다 익혀서 사용하려고 노력했습니다. 그렇게 하느 ㄴ것이 실력을 과시하는 것이라고 생각했고 또한 그렇게 익혀서 사용한 기능들은 모두 다 제대로 동작할 것이라고 믿었습ㄴ디ㅏ.

하지만 결국 알게 된 것은 그 기능들 중에 일부는 득보다 실이 많다는 것이었습니다. 일부 기능은 제대로 정의되지 않은 경우도 있었고, 다른 쪽으로 이식을 할 떄 문제를 일으키는 기능들도 있었습니다. 그리고 어떤 요소들은 수정을 어렵게 하거나 가독성이 떨어지게 했고, 심지어 어떤 것들은 오류가 발생할 확률이 높고 복잡한 방법으로 프로그래밍해야지만 사용할 수 있었습니다. 그뿐만 아니라 어떤 기능들은 언어의 구조에 문제가 있는 경우도 있었고, 언어를 고안한 사람이 실수를 한 경우도 있었습니다. 

대부분의 프로그래밍 언어에는 좋은 점과 나쁜 점이 있습니다. 오랜 프로그래밍 경험으로 언어의 좋은 점만을 사용하고 나쁜 점은 사용을 자제함으로써 좀더 좋은 프로그래머가 될 수 있다는 것을 알게 되었습니다. 결국, 요점은 어떻게 하면 나쁜 점을 피해서 좋은 결과를 얻느냐는 것입니다.

표준을 제정하는 위원회가 언어의 나쁜 점들을 제거하기는 어렵습니다. 왜냐하면 위원회가 나쁜 점을 제거하게 되는 경우 기존에 그 나쁜 점을 사용하여 개발된 프로그램들에 영향을 미치기 때문입니다. 그러므로 위원회는 보통 기준의 불완전함 위에 더 많은 기능을 추가하는 것 외에는 힘이 없습니다 .설상가상으로 새로 추가한 기능들이 기존 기능들과 조화를 이루지 못하는 경우도 있기 때문에, 언어의 나쁜 점이 가중되는 결과를 낳기도 합니다. 

하지만 다행인 것은 언어의 모든 기능과 명세가 어떻든 간에 그 기능들 중에서 자신만의 부분집합을 지정할 수 있다는 것입니다. 우리는 전적으로 언어의 좋은 점만을 사용함으로써 좀더 나은 프로그램을 작성할 수 있습니다.

자바스크립트는 연구실에서 좀더 좋게 정련하는 과정을 거치지 못한 체 세상으로 나왔지만 출현하자마자 단기간에 브라우저 전체에 채택됐습니다. 그러나 기억할 점은 자바스크립트의 유명세는 프로그래밍 언어로서의 품질과 별개의 문제였다는 것입니다.

다행히도, 자바스크립트는 좋은 점이 상당히 많습니다. 좋은 의도와 실수들 더미에 묻혀있는 아름답고 우아하며 매우 표현적인 특성이 있습니다. 자바스크립트의 진정한 속성들은 '자바스크립트는 별 볼일 없고 기능 없는 장난감에 불과하다'는 지배적인 의견 때문에 수년 동안 감춰져 있었습니다. 이 책을 집필하게 된 의도가 이 부분에 있습니다. 바로 동적 언어로서 두드러진 특성을 지닌 자바스크립트이 장점들을 부각하기 위해서입니다. 이 책에서는 자바스크립트의 진정한 본성을 드러내지 못하는 우아하지 않은 기능들을 모두 제거해 버렸습니다. 이 책에서 제시하는 정제된 언어의 부분집합은 보다 신뢰할 수 있고 읽기 편하며 유지가 용이한 좋은 언어적 특성을 나타낼 것입니다.

이 책에는 자바스크립트의 모든 것이 담겨 있지 않습니다. 그래서 간간히 피해야 할 나쁜 점들을 언급하지는 하지만 전적으로 자바스크립트의 좋은 점에만 초점을 맞출 것입니다. 여기서 기술하는 부분집합은 크던 작던 규모에 상관 없이 신뢰할 수 있고 가독성이 좋은 프로그램을 작성하는데 사용할 수 있습니다. 또한 좋은 점에만 초점을 맞춤으로써 언어를 익히는 시간도 단축할 수 있고, 프로그램의 견고함도 높일 수 있으며 종이도 아낄 수 있습니다. 아마 좋은 점만을 배움으로써 얻을 수 있는 최대의 이점은 나쁜 점을 잊어야 하는 수고를 덜 수 있다는 것입니다. 나쁜 패턴을 잊어버리는 것은 쉽지 않습니다. 잊어버리려고 시도하면 대부분은 심한 저항에 부딪히게 됩니다. 때때로 프로그래밍 언어를 보다 쉽게 가르치기 위해서 부분집합만을 사용하는 경우가 있습니다. 하지만 이 챙게서는 그런 초보용 부분집합이 아니라 전문가를 위한 자바스크립트의 부분집합을 다룹니다.


## 왜 자바스크립트인가?

자바스크립트는 웹 브라우저의 언어이기 때문에 세계에서 가장 유명하고 주용한 언어 중 하나입니다. 하지만 그와 동시에 가장 무시당하고 있는 언어 중에 하나이기도 합니다. 브라우저의 API라고 할 수 있는 DOM은 아주 형편없는데 거기에 편승하여 자바스크립트도 부당한 비난을 받고 있습니다. DOM은 어떠한 언어로 다루든지 용이하지 않습니다. DOM은 서툴게 정의됐으며 그에 따라 그 표현도 제 각각입니다. 이 책에서는 DOM에 관해 아주 적은 부분만을 언급합니다. 아마 DOM에 관한 좋은 점만을 모아 놓은 책을 집필하는 것은 매우 어려운 도전일 것입니다.

자바스크립트는 여타 다른 언어들과 다른 점이 많기 때문에 저 평가돼 있습니다. 만약 여러분이 다른 언어들에 익숙한 상태인데 오로지 자바스크립트만 지원하는 환경에서 프로그래밍을 해야 하는 상황에 처한다면, 당연히 자바스크립트만을 사용해야 할 것이며 이로 인해 무척 짜증이 날 것입니다. 이러한 상황에 처하는 대부분의 사람은 일단 자바스크립트를 알아보려는 노력조차 하지 않습니다. 그러다가 자신들이 대신 사용했으면 하는 언어와 매우 다르다는 점에 놀라고 차별하기 시작합니다.

자바스크립트의 놀라운 점은 언어 자체에 대해 많이 모르거나 심지어는 프로그래밍에 대해 잘 모르더라도 원하는 작업을 할 수 있다는 것입니다. 이를 볼 때 자바스크립트는 놀라운 표현력을 가진 언어입니다. 하지만 여러분이 무엇을 하고 있는지 알고 있을 때 자바스크립트는 더 큰 힘을 발휘합니다. 프로그래밍은 어려운 비즈니스기 때문에 결코 무지한 가운데 진행해서는 안됩니다.

## 자바스크립트 분석
잡자스크립트는 몇몇의 매우 좋은 아이디어와 몇몇의 나쁜 (그것도 아주) 아이디어에 기초하여 만들어졌습니다.

매우 좋은 아이디어에는 `함수`, `느슨한 타입체크`, `동적 객체`, `표현적인 객체 리터럴 표기법` 등이 있습니다. 그리고 대표할 만한 나쁜 아이디어는 프로그래밍 모델이 `전역변수`에 기초하고 있다는 것입니다.

자바스크립트의 함수는 어휘적 유효범위를 가진 일급 객체입니다. 또한 주류가 된 첫 번째 lambda(익명 함수나 클로저 등을 정의하기 위한 표현식) 언어며, 좀더 깊이 들어가면, 이름처럼 자바에 가깝기보다는 Lisp 언어 그리고 Scheme 언어와 더 많은 공통점이 있습니다. 자바스크립트는 C의 옷을 입은 Lisp이라고 할 수 있습니다. 놀라울 정도로 강력한 언어적 특징은 바로 이러한 특성에서 기인한 것입니다.

오늘날 프로그래밍 언어 대부분은 강력한 데이터 타입 체크를 요구합니다. 이러한 경향을 강력한 타입 체크를 해야 컴파일러가 컴파일 시간에 가능한 많은 오류를 찾을 수 있다는 이론에 근거한 것입니다. 오류를 가능한 빨리 찾아서 수정을 하면 추후에 오류 발생으로 생기는 비용을 더 많이 줄일 수 있다는 생각입니다. 자바스크립트는 느슨한 타입 체크 언어입니다. 그래서 자바스크립트 컴파일러는 타입 오류를 찾을 수 없습니다. 이러한 점은 강력한 타입체크를 하는 언어를 사용하다가 자바스크립트로 넘어온 사람들에게는 놀라운 일일 수 없습니다. 하지만 강력한 타입 체크가 중요한 오류들을 효율적으로 제거하지 못한다는 것이 판명됐습니다. 그리고 경험에 의하면 강력한 타입체크가 오류를 알려주기는 하지만 실제로 우려하는 오류들은 알려주지 못합니다. 반면에 느슨한 타입 체크에서 발견한 것은 오류찾기의 어려움이 아니라 자유로움입니다. 느슨한 타입 체크를 하는 언어를 사용하면 `복잡한 클래스 계층을 구성할 필요도 없으며`, 원하는 대로 동작하토록 타입 캐스팅과 씨름할 필요도 없습니다.

자바스크립트는 매우 강력한 객체 리터럴 표기법이 있습니다. 이 표기법을 사용하면 단순히 필요한 요소들을 열거하는 방법으로 객체를 만들 수 있습니다. 이러한 표기법은 유명한 데이터 교환 형식인 JSON에도 영감을 주었습니다.

자바스크립트에서 논란의 대상이 되는 기능은 `프로토타입에 의한 상속`입니다. 자바스크립트는 `클래스가 필요없는 객체 시스템이 있어서 특정 객체에 있는 속성들을 다른 객체에 직접 상속할 수 있습니다.` 이러한 특성은 매우 강력하지만 클래스 기반의 언어에 익숙한 프로그래머에게는 친숙하지 않은 점입니다. 만약, 여러분이 클래스 기반의 설계 패턴을 그대로 자바스크립트에 사용하려고 한다면 아마 좌절감을 느낄 것입니다. 하지만 자바스크립트가 제공하는 프로토타입의 특성을 배운다면 이러한 노력은 분명 보상받을 것입니다.

자바스크립트는 몇몇 핵심 개념들 때문에 더 많이 비난을 받고 있습니다. 좀 다르긴 해도 핵심 개념의 대부분은 좋은 선택이었습니다. 하지만 특별히 잘못 선택된 점이 하나 있는데 그것은 `전역변수`에 근간을 두고 있다는 것입니다. 모든 컴파일 단위에 있는 최상위 레벨의 변수들은 모두 전역객체라 불리는 공용 이름 공간에 위치하게 됩니다. 전역변수는 나쁘기 때문에 이러한 개념은 상당히 좋지 않다고 볼 수 있습니다. 그런데 이것이 자바스크립트의 근간을 이루는 것 중에 하나입니다. 그나마 다행인 것은 자바스크립트에는 이러한 문제를 완화시킬 수 있는 방법이 있다는 것입니다.

단위에 있는 최상위 레벨의 변수들은 모두 `전역객체`라 불리는 `공용 이름 공간(namespace)`에 위치하게 됩니다. 전역변수는 나쁘기 때문에 이러한 개념은 상당히 좋지 않다고 볼 수 있습니다. 그런데 이것이 자바스크립트의 근간을 이루는 것 중에 하나입니다. 그나마 다행인 것은 자바스크립트에는 이러한 문제를 완화시킬 수 있는 방법이 있다는 것입니다. 

때때로 어쩔 수 없이 사용하는 자바스크립트의 나쁜 점들이 있습니다. 이렇게 피할 수 없는 필요악 같은 부분들은 이 책에서 나올 때마다 바로 언급할 것입니다. 피할 수 없는 나쁜 부분들이 있기는 하지만, 우리는 이 책으로 인해 부록 B에서 알려주고 있는 꼭 피해야 할 자바스크립트의 나쁜 점들은 대부분 피하는데 성공할 것입니다. 

자바스크립트는 모순이 많은 언어입니다. 자바스크립트에는 많은 오류가 있기 때문에, '도대체 왜 자바스크립트를 사용해야 하지?'하고 생각할 수 있습니다. 이에 대한 댑은 두 가지가 있습니다. 그 중 첫 번째는 선택의 여지가 없다는 것입니다. 웹은 애플리케이션 개발에 있어 중요한 플랫폼이며, 자바스크립트는 모든 브라우저에서 사용할 수 있는 유일한 언어입니다. 자바가 이 환경에서 실패한 것은 어쩌면 불행한 일이라고도 볼 수 있습니다. 만약 자바가 실패하지 않았다면 강력한 타입 체크를 하는 클래스 기반의 언어를 원하는 이들에게는 좋은 선택이 됐을 것입니다. 하지만 자바는 실패했고, 자바스크립트는 살아남아 번성했으며, 이는 자바스크립트가 나름대로 옳았다는 하나의 증거이기도 합니다.

두 번째 답은 많은 부족한 면이 있기는 하지만 자바스크립트는 실제로 꽤 괜찮다는 것입니다. 자바스크립트는 매우 경량화돼 있으며 표현적입니다. 그리고 일단 언어 사용의 요령을 익히고 나면 함수형 프로그래밍이 꽤 재미있다는 것을 알게 됩니다.

하지만 자바스크립트라는 언어를 잘 사용하기 위해서는 이 언어의 한계점을 잘 알아야 합니다. 이를 위해 이 책에서느 나자바스크립트를 용감하게 조각내서 좋은 점만을 제공할 것입니다. 자바스크립트의 좋은 점들은 나쁜 점들을 보상하고도 남을 정도로 충분한 가치가 있습니다. 


## 예제 테스트를 위한 간단한 준비

웹 브라우저와 텍스트 에디터만 있으면 자바스크립트 프로그램을 실행시킬 모든 준비가 끝난 것입니다. 먼저 다음 내용을 `program.html` 파일로 저장합니다.

```html5
<!DOCTYPE html>
<html>
<body>
<pre><script src="program.js"></script></pre>
</body>
</html>
```

그런 다음 같은 폴더에 다음의 내용을 `program.js`파일로 저장합니다.

```javascript
document.writeln('Hello, world!');
```

이제 결과를 보기 위해 program.html 파일을 브라우저로 불러와서 결과를 호가인합니다.

다음에 나오는 코드는 이 책 전체에서 새로운 메소드를 정의할 때 두루 쓰이는 method라는 메소드입니다.

```javascript
function.prototype.method = function (name, func) {
  thos.prototype[name] = func;
  return this
}
```
